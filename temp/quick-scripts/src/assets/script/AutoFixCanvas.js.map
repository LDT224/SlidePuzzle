{"version":3,"sources":["assets\\script\\AutoFixCanvas.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA2C,iCAAY;IAAvD;QAAA,qEA+CC;QA3CG,wBAAwB;QAExB,eAAe;QACP,oBAAc,GAAG,CAAC,CAAC;QACnB,oBAAc,GAAG,CAAC,CAAC;;IAuC/B,CAAC;IArCG,6BAAK,GAAL;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QACpD,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;QACvC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACxC,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC5B,CAAC;IAED,8BAAM,GAAN,UAAO,EAAE;QACL,IAAI,IAAI,CAAC,cAAc,IAAI,EAAE,CAAC,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC,cAAc,IAAI,EAAE,CAAC,OAAO,CAAC,MAAM,EAAE;YACrF,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;YACvC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC;YAExC,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC3B;IACL,CAAC;IAED,wCAAgB,GAAhB;QACI,IAAI,QAAQ,GAAG,IAAI,GAAG,GAAG,CAAC;QAE1B,IAAI,SAAS,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QAErD,IAAI,SAAS,IAAI,QAAQ,EAAE;YACvB,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,KAAK,CAAC;SACpC;aACI;YACD,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,KAAK,CAAC;YAClC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;SACnC;QAED,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QAC1B,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,EAAE;YACP,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;SACnC;IACL,CAAC;IA9CgB,aAAa;QADjC,OAAO;OACa,aAAa,CA+CjC;IAAD,oBAAC;CA/CD,AA+CC,CA/C0C,EAAE,CAAC,SAAS,GA+CtD;kBA/CoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AutoFixCanvas extends cc.Component {\r\n\r\n    private mainCanvas: cc.Canvas;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n    private currentScreenW = 0;\r\n    private currentScreenH = 0;\r\n\r\n    start() {\r\n        this.mainCanvas = this.node.getComponent(cc.Canvas);\r\n        this.currentScreenW = cc.winSize.width;\r\n        this.currentScreenH = cc.winSize.height;\r\n        this.updateCanvasSize();\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.currentScreenW != cc.winSize.width || this.currentScreenH != cc.winSize.height) {\r\n            this.currentScreenW = cc.winSize.width;\r\n            this.currentScreenH = cc.winSize.height;\r\n\r\n            this.updateCanvasSize();\r\n        }\r\n    }\r\n\r\n    updateCanvasSize() {\r\n        var original = 1280 / 720;\r\n\r\n        var newScreen = cc.winSize.width / cc.winSize.height;\r\n\r\n        if (newScreen >= original) {\r\n            this.mainCanvas.fitHeight = true;\r\n            this.mainCanvas.fitWidth = false;\r\n        }\r\n        else {\r\n            this.mainCanvas.fitHeight = false;\r\n            this.mainCanvas.fitWidth = true;\r\n        }\r\n\r\n        var h = cc.winSize.height;\r\n        var w = cc.winSize.width;\r\n        if (w < h) {\r\n            this.mainCanvas.fitHeight = true;\r\n            this.mainCanvas.fitWidth = true;\r\n        }\r\n    }\r\n}\r\n"]}